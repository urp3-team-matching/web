generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider  = "postgresql"
  url       = env("DATABASE_URL")
  directUrl = env("DIRECT_URL")
}

model Project {
  id Int @id @default(autoincrement())

  proposer   Proposer?
  applicants Applicant[]

  name      String
  viewCount Int    @default(0)

  background String
  method     String
  objective  String
  result     String

  attachments String[]
  tags        String[]

  createdDatetime DateTime @default(now())
  updatedDatetime DateTime @default(now())

  passwordHash String @map("password")
}

enum ProposerType {
  PROFESSOR
  STUDENT
  HOST
}

model Proposer {
  id Int @id @default(autoincrement())

  projectId Int     @unique
  project   Project @relation(fields: [projectId], references: [id])

  type         ProposerType
  name         String
  email        String
  major        String
  phone        String
  introduction String

  createdDatetime DateTime @default(now())
  updatedDatetime DateTime @default(now())

  passwordHash String @map("password")
}

model Applicant {
  id Int @id @default(autoincrement())

  projectId Int
  project   Project @relation(fields: [projectId], references: [id])

  name         String
  email        String
  major        String
  phone        String
  introduction String

  createdDatetime DateTime @default(now())
  updatedDatetime DateTime @default(now())

  passwordHash String @map("password")
}

model Post {
  id Int @id @default(autoincrement())

  title       String
  content     String
  author      String
  attachments String[]

  createdDatetime DateTime @default(now())
  updatedDatetime DateTime @default(now())
}
